Tags: [[для собеседований]]

#golang 



## Интерфейсы



Все вопросы сводятся к следующему списку:

![[Screenshot From 2025-10-04 17-47-40.png]]



> [!info] 
> Интрерфейсы нужны для **уменьшения связанности кода** - лаконичное определение, если спросят



В рантайме интерфейс выглядит так

```go
type iface struct {
	tab *itab
	data unsafe.Pointer
}
```



1. `Nil` vs `not-nil` интерфейс

	В рантайме GO интерфейс - это **структура с двумя полями ссылочного типом**
	
	Каждая ссылка в 64-битной системе весит 8байт
	
	Соответственно пустой интерфейс будет весить 16 байт (32 в 32-битной системе)
	
	
	Переменная типа `interface` будет равно `nil` только тогда, когда **обе ссылки равны `nil`**, т.е. нет не только **данных**, но и **информации о типе данных**
	
	
	Пример с известным типом
	
	```go
	func foo(a interface{}) {  
	    println(a == nil)  // false!
	}  
	  
	func main() {  
	    var a int  
	  
	    foo(a)  
	}
	```
	
	
	
	Если ф-ия возвращает тип `interface{}`, даже без значений, то переменная будет проходить проверку на `nil`
	
	Однако при выводе через `fmt.Println` возьмется **динамическое значение**
	
	```go
	type SomeStruct struct{}  
	  
	func foo() interface{} {  
	  
	    var result *SomeStruct  
	  
	    return result  
	}  
	  
	func main() {  
	    res := foo()  
	  
	    if res != nil {  
	       fmt.Println("res != nil! res =", res)  
	    }  
	}
	```
	
	
	Через `type definition` проверку на `Nil` пройдет даже тип с базовым `interface{}`
	
	```go
	type SomeInterface interface{}
	```


---


2. 

	
	
	
	
	
	
	
	
	
	
	
	
---


## Related


