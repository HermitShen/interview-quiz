Tags: [[для собеседований]]

#golang 



## Процессы и поток ОС



1. Что такое процесс?

	Процесс - это **абстракция**, содержащая **всю информацию о запущенной программе**.
	
	Она нужна для того, чтобы планировщик ОС мог следить за множеством запущенных программ
	
	
	Программа становится процессом в несколько этапов:
	
	- Программа с помощью **комплилятора** приводится к **исполняемому коду** - **бинарному представлению кода** на каком-либо высокоуровневом ЯП
	  
	- Программа запускается - скомпилированный код загружается в RAM и CPU начинает выполнять **инструкции** с нужного entrypoint-а
	
	
	
	У программы есть:
	
	- **Независимое адресное пространство** - другие процессы не могут писать в/читать из другого
	  
	- Дескрипторы ресурсов и др.
	
	![[Screenshot From 2025-10-07 02-26-54.png]]
	
	
	
	Бинарник программы загружается в RAM **сегментами**:
	
	![[Screenshot From 2025-10-07 02-30-09.png]]
	
	
	`Text` сегмент - здесь хранится скомпилированный код программы, он доступен **только для чтения** (`Read-only`)
	
	
	`Data/BSS` сегмент - иниц./неиниц. глобальные переменные, а также данные, подгружаемые с диска вместе с запуском программы
	
	
	`Heap` - куча - место для переменных, которые должны **переживать вызов ф-ий**
	
	
	`Stack` - выделенная для каждого **потока исполнения** память
	
	У каждого стека есть свой **stack-pointer** (SP), локальные переменные, **адреса возвратов** и прочее
	
	Размер каждого стека - **до 8Мб**
	


---


2. Как процессор выполняет инструкции процесса?

	В сегменте `text` хранятся в бинарном виде инструкции для процессора
	
	
	Как выглядит цикл работы CPU по инструкциям:
	
	- CPU берет адрес **первой инструкции** (в дальнейшем он просто будет делать вечный цикл по инструкциям) из регистра IP **(instruction pointer)**, который ядро CPU в начале запуска приложения заполнило
	  
	- Читает байты инструкции из памяти по этому адресу, при этом адрес **виртуальной памяти** транслируется на адрес **физический**, а все соответствия сохраняет в **TLB буфер**
	 
	![[Screenshot From 2025-10-07 04-31-45.png]]
	
	- Физический адрес инструкции читаетсяся в кэш процессора кэш-линиями
	
	- Инструкции **декодируются**, параллельно лежа в IR (**instruction registry**) - аналоге **буфера**. Декодирование нужно, чтобы понять, **что за операция и какие операнды** (какие регистры/память).
	
	- Выполняем инструкцию, это может быть **чтение в регистры**, **выполнение операций** или **запись рез-та в регистры/память**
	
	
	
	
	
	
	
	


---


## Related


